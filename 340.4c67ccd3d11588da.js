"use strict";(self.webpackChunk_modelnow_proto=self.webpackChunk_modelnow_proto||[]).push([[340],{7340:(J,p,a)=>{a.r(p),a.d(p,{AppMeetingsPage:()=>N});var u=a(1368),m=a(3364),f=a(5657),l=a(3616),d=a(1940),v=a(8548),E=a(8368),M=a(8108),C=a(4804),e=a(4496),h=a(5408),O=a(8808),y=a(9592);function R(n,o){1&n&&(e.I0R(0,"p"),e.OEk(1," Pas de rendez-vous pass\xe9s. "),e.C$Y())}function I(n,o){1&n&&e.C_f(0)}const g=n=>({meeting:n});function G(n,o){if(1&n){const t=e.KQA();e.I0R(0,"li"),e.yuY(1,I,1,0,"ng-container",12),e.I0R(2,"ul")(3,"li")(4,"button",13),e.qCj("click",function(s){const r=e.usT(t).$implicit,_=e.GaO(3);return e.CGJ(_._onRescheduleMeetingButtonClick(s,r))}),e.OEk(5,"Reprendre RDV"),e.C$Y()(),e.I0R(6,"li")(7,"button",14),e.qCj("click",function(s){const r=e.usT(t).$implicit,_=e.GaO(3);return e.CGJ(_._onFavoriteButtonClick(s,r))}),e.wR5(8,"span",15,16),e.I0R(10,"span",17),e.OEk(11,"Favoris"),e.C$Y()()()()()}if(2&n){const t=o.$implicit,i=e.GaO(3),s=e.Gew(15);e.yG2(),e.E7m("ngTemplateOutlet",s)("ngTemplateOutletContext",e.S45(4,g,t)),e.yG2(6),e.e48("aria-label",i.isMeetingInFavorite(t)?"Cliquer pour retirer l'\xe9tablissement de vos favoris":"Cliquer pour mettre l'\xe9tablissement dans vos favoris"),e.yG2(),e.E7m("ui-icon",i.isMeetingInFavorite(t)?"ionicon:heart--filled":"ionicon:heart")}}function T(n,o){if(1&n&&(e.I0R(0,"ul"),e.yuY(1,G,12,6,"li",11),e.C$Y()),2&n){const t=e.GaO(2);e.yG2(),e.E7m("ngForOf",t.pastMeetings)}}function P(n,o){if(1&n&&(e.I0R(0,"section",0)(1,"h3",8,9),e.OEk(3,"Rendez-vous pass\xe9s"),e.C$Y(),e.yuY(4,R,2,0,"p",10)(5,T,2,1,"ul",10),e.C$Y()),2&n){const t=e.Gew(2),i=e.GaO();e.E7m("uiAriaLabelledby",t),e.yG2(4),e.E7m("ngIf",!i.pastMeetings.length),e.yG2(),e.E7m("ngIf",i.pastMeetings.length)}}function k(n,o){1&n&&(e.I0R(0,"p"),e.OEk(1," Pas de rendez-vous \xe0 venir. "),e.C$Y())}function A(n,o){1&n&&e.C_f(0)}function F(n,o){if(1&n){const t=e.KQA();e.I0R(0,"li"),e.yuY(1,A,1,0,"ng-container",12),e.I0R(2,"ul")(3,"li")(4,"button",19),e.qCj("click",function(s){const r=e.usT(t).$implicit,_=e.GaO(3);return e.CGJ(_._onUpdateMeetingButtonClick(s,r))}),e.OEk(5,"D\xe9placer le RDV"),e.C$Y()(),e.I0R(6,"li")(7,"button",20),e.qCj("click",function(s){const r=e.usT(t).$implicit,_=e.GaO(3);return e.CGJ(_._onRemoveMeetingButtonClick(s,r))}),e.OEk(8,"Annuler le RDV"),e.C$Y()(),e.I0R(9,"li")(10,"button",14),e.qCj("click",function(s){const r=e.usT(t).$implicit,_=e.GaO(3);return e.CGJ(_._onFavoriteButtonClick(s,r))}),e.wR5(11,"span",15,16),e.I0R(13,"span",17),e.OEk(14,"Favoris"),e.C$Y()()()()()}if(2&n){const t=o.$implicit,i=e.GaO(3),s=e.Gew(15);e.yG2(),e.E7m("ngTemplateOutlet",s)("ngTemplateOutletContext",e.S45(4,g,t)),e.yG2(9),e.e48("aria-label",i.isMeetingInFavorite(t)?"Cliquer pour retirer l'\xe9tablissement de vos favoris":"Cliquer pour mettre l'\xe9tablissement dans vos favoris"),e.yG2(),e.E7m("ui-icon",i.isMeetingInFavorite(t)?"ionicon:heart--filled":"ionicon:heart")}}function x(n,o){if(1&n&&(e.I0R(0,"ul"),e.yuY(1,F,15,6,"li",11),e.C$Y()),2&n){const t=e.GaO(2);e.yG2(),e.E7m("ngForOf",t.upcomingMeetings)}}function b(n,o){if(1&n&&(e.I0R(0,"section",0)(1,"h3",8,18),e.OEk(3,"Rendez-vous \xe0 venir"),e.C$Y(),e.yuY(4,k,2,0,"p",10)(5,x,2,1,"ul",10),e.C$Y()),2&n){const t=e.Gew(2),i=e.GaO();e.E7m("uiAriaLabelledby",t),e.yG2(4),e.E7m("ngIf",!i.upcomingMeetings.length),e.yG2(),e.E7m("ngIf",i.upcomingMeetings.length)}}function D(n,o){1&n&&(e.I0R(0,"p"),e.OEk(1," Pas de rendez-vous favoris. "),e.C$Y())}function $(n,o){1&n&&e.C_f(0)}function Y(n,o){if(1&n){const t=e.KQA();e.I0R(0,"li"),e.yuY(1,$,1,0,"ng-container",12),e.I0R(2,"ul")(3,"li")(4,"button",13),e.qCj("click",function(s){const r=e.usT(t).$implicit,_=e.GaO(3);return e.CGJ(_._onRescheduleMeetingButtonClick(s,r))}),e.OEk(5,"Prendre RDV"),e.C$Y()(),e.I0R(6,"li")(7,"button",14),e.qCj("click",function(s){const r=e.usT(t).$implicit,_=e.GaO(3);return e.CGJ(_._onFavoriteButtonClick(s,r))}),e.wR5(8,"span",15,16),e.I0R(10,"span",17),e.OEk(11,"Favoris"),e.C$Y()()()()()}if(2&n){const t=o.$implicit,i=e.GaO(3),s=e.Gew(15);e.yG2(),e.E7m("ngTemplateOutlet",s)("ngTemplateOutletContext",e.S45(4,g,t)),e.yG2(6),e.e48("aria-label",i.isMeetingInFavorite(t)?"Cliquer pour retirer l'\xe9tablissement de vos favoris":"Cliquer pour mettre l'\xe9tablissement dans vos favoris"),e.yG2(),e.E7m("ui-icon",i.isMeetingInFavorite(t)?"ionicon:heart--filled":"ionicon:heart")}}function L(n,o){if(1&n&&(e.I0R(0,"ul"),e.yuY(1,Y,12,6,"li",11),e.C$Y()),2&n){const t=e.GaO(2);e.yG2(),e.E7m("ngForOf",t.favoriteMeetings)}}function B(n,o){if(1&n&&(e.I0R(0,"section",0)(1,"h3",8,21),e.OEk(3,"Rendez-vous favoris"),e.C$Y(),e.yuY(4,D,2,0,"p",10)(5,L,2,1,"ul",10),e.C$Y()),2&n){const t=e.Gew(2),i=e.GaO();e.E7m("uiAriaLabelledby",t),e.yG2(4),e.E7m("ngIf",!i.favoriteMeetings.length),e.yG2(),e.E7m("ngIf",i.favoriteMeetings.length)}}function K(n,o){if(1&n&&(e.I0R(0,"span"),e.OEk(1),e.C$Y()),2&n){const t=e.GaO().meeting,i=e.GaO();e.yG2(),e.cNF(i.getMeetingItemsResume(t))}}function U(n,o){if(1&n&&(e.I0R(0,"span"),e.OEk(1),e.C$Y()),2&n){const t=e.GaO().meeting,i=e.GaO();e.yG2(),e.MjK(" ",i.formatMeetingDatetime(t.datetime)," "," \u2022 "," ",i.getMeetingTotalAmount(t),"\u20ac ")}}function z(n,o){if(1&n&&(e.I0R(0,"span"),e.OEk(1),e.C$Y(),e.OEk(2),e.I0R(3,"span"),e.OEk(4),e.C$Y(),e.OEk(5),e.yuY(6,K,2,1,"span",10),e.OEk(7),e.yuY(8,U,2,3,"span",10)),2&n){const t=o.meeting,i=e.GaO();e.yG2(),e.cNF(i.getMeetingProviderName(t)),e.yG2(),e.oRS(""," "," "),e.yG2(2),e.cNF(i.getMeetingProviderCity(t)),e.yG2(),e.oRS(""," "," "),e.yG2(),e.E7m("ngIf",t.items.length),e.yG2(),e.oRS(""," "," "),e.yG2(),e.E7m("ngIf",t.datetime)}}const W=()=>[".","passes"],j=()=>[".","a-venir"],w=()=>[".","favoris"];let N=(()=>{class n{constructor(t,i,s,c){this.changeDetectorRef=t,this.cartFacade=i,this.meetingFacade=s,this.routerFacade=c,this.fakeNow=new Date(2023,9,13,12,0).getTime(),this.offers=d.S.offers,this.providers=d.S.providers,this.meetingsType=this.routerFacade.getRouteDataForKey("meetingsType",0),this.favoriteMeetings=this.meetingFacade.getFavoriteMeetings(),this.pastMeetings=this.meetingFacade.getPastMeetings(this.fakeNow),this.upcomingMeetings=this.meetingFacade.getUpcomingMeetings(this.fakeNow),this.destroyed$=new f.E}ngOnInit(){this.routerFacade.ofRouteDataForKey("meetingsType",0).pipe((0,l.a)(this.destroyed$)).subscribe(i=>{this.meetingsType=i,this.changeDetectorRef.markForCheck()}),this.meetingFacade.entities$.pipe((0,l.a)(this.destroyed$)).subscribe(()=>{this.pastMeetings=this.meetingFacade.getPastMeetings(this.fakeNow),this.upcomingMeetings=this.meetingFacade.getUpcomingMeetings(this.fakeNow),this.changeDetectorRef.markForCheck()}),this.meetingFacade.favoriteVenues$.pipe((0,l.a)(this.destroyed$)).subscribe(()=>{this.favoriteMeetings=this.meetingFacade.getFavoriteMeetings(),this.changeDetectorRef.markForCheck()})}formatMeetingDatetime(t){return(0,v._m)(new Date(t),"EEEE d LLLL HH:mm")}getMeetingProvider(t){return this.providers.find(i=>i.uid===t.venue)}getMeetingProviderName(t){return this.getMeetingProvider(t).name}getMeetingProviderCity(t){return this.getMeetingProvider(t).city}getMeetingItemsResume(t){const i=this.offers.filter(s=>s.provider===t.venue);return t.items.map(s=>i[+s].name+" x 1").join(" + ")}getMeetingTotalAmount(t){const i=this.offers.filter(s=>s.provider===t.venue);return t.items.reduce((s,c)=>s+i[+c].price,0)}isMeetingInFavorite(t){return this.meetingFacade.isFavoriteVenue(t.venue)}_onFavoriteButtonClick(t,i){t.preventDefault(),this.meetingFacade.toggleVenueFavorite(i.venue)}_onRemoveMeetingButtonClick(t,i){t.preventDefault(),this.meetingFacade.removeMeeting(i)}_onRemoveFavoriteButtonClick(t,i){t.preventDefault(),this.meetingFacade.toggleMeetingFavorite(i)}_onRescheduleMeetingButtonClick(t,i){t.preventDefault(),this.routerFacade.navigate(["/","etablissements",i.venue])}_onUpdateMeetingButtonClick(t,i){t.preventDefault(),this.cartFacade.updateEntry(i.venue,i.datetime,i.items),this.routerFacade.navigate(["/","etablissements",i.venue,"reservation"])}static#e=this.\u0275fac=function(i){return new(i||n)(e.GI1(e.kD9),e.GI1(h.Q),e.GI1(O.K),e.GI1(y.A))};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-meetings-page"]],hostAttrs:[1,"app-meetings-page"],standalone:!0,features:[e.UHJ],decls:16,vars:10,consts:[[3,"uiAriaLabelledby"],[1,"ui-heading-5"],["meetingsTitle",""],["aria-label","Rendez-vous pass\xe9s","ui-ripple","","routerLinkActive","active",3,"routerLink"],["aria-label","Rendez-vous \xe0 venir","ui-ripple","","routerLinkActive","active",3,"routerLink"],["aria-label","Rendez-vous favoris","ui-ripple","","routerLinkActive","active",3,"routerLink"],[3,"uiAriaLabelledby",4,"ngIf"],["meetingBaseTemplate",""],[1,"ui-heading-6","ui-sr-only"],["pastMeetingsTitle",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-label","Prendre \xe0 nouveau rendez-vous","ui-ripple","",1,"ui-button","ui-outline-button--primary",3,"click"],["type","button","ui-ripple","","ui-ripple-centered","","ui-ripple-unbounded","",1,"favorite-button",3,"click"],["aria-hidden","true",3,"ui-icon"],["heartIcon","uiIcon"],[1,"ui-label-2"],["upcomingMeetingsTitle",""],["aria-label","D\xe9placer le rendez-vous","ui-ripple","",1,"ui-button","ui-outline-button--primary",3,"click"],["aria-label","Annuler le rendez-vous","ui-ripple","",1,"ui-button","ui-outline-button--error",3,"click"],["favoriteMeetingsTitle",""]],template:function(i,s){if(1&i&&(e.I0R(0,"header",0)(1,"h2",1,2),e.OEk(3,"Rendez-vous"),e.C$Y(),e.I0R(4,"nav")(5,"a",3),e.OEk(6,"Pass\xe9s"),e.C$Y(),e.I0R(7,"a",4),e.OEk(8,"\xc0 venir"),e.C$Y(),e.I0R(9,"a",5),e.OEk(10,"Favoris"),e.C$Y()()(),e.yuY(11,P,6,3,"section",6)(12,b,6,3,"section",6)(13,B,6,3,"section",6)(14,z,9,7,"ng-template",null,7,e.gJz)),2&i){const c=e.Gew(2);e.E7m("uiAriaLabelledby",c),e.yG2(5),e.E7m("routerLink",e.q4q(7,W)),e.yG2(2),e.E7m("routerLink",e.q4q(8,j)),e.yG2(2),e.E7m("routerLink",e.q4q(9,w)),e.yG2(2),e.E7m("ngIf",1===s.meetingsType),e.yG2(),e.E7m("ngIf",0===s.meetingsType),e.yG2(),e.E7m("ngIf",2===s.meetingsType)}},dependencies:[u.Iw,u.u_,u.XV,m.ER,m.LC,E._,M.W,C.i],encapsulation:2,changeDetection:0})}return n})()}}]);