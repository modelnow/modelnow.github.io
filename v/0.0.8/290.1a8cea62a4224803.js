"use strict";(self.webpackChunk_modelnow_proto=self.webpackChunk_modelnow_proto||[]).push([[290],{6290:(We,k,l)=>{l.r(k),l.d(k,{AppShopPage:()=>Oe});var b=l(6814),L=l(3573),O=l(8645),S=l(4664),C=l(3019),x=l(9773),W=l(3620),D=l(2181),J=l(1687),U=l(8180),y=l(4366),M=l(2096),q=l(6440),I=l(6584),h=l(304),j=l(5333);class ${constructor(){this.config={currency:{name:"dollar",plural:"dollars",symbol:"$",fractionalUnit:{name:"cent",plural:"cents",symbol:"\xa2"}},texts:{and:"and",minus:"minus",only:"only",point:"point"},numberWordsMapping:[{number:1e15,value:"quadrillion"},{number:1e12,value:"trillion"},{number:1e9,value:"billion"},{number:1e6,value:"million"},{number:1e3,value:"thousand"},{number:100,value:"hundred"},{number:90,value:"ninety"},{number:80,value:"eighty"},{number:70,value:"seventy"},{number:60,value:"sixty"},{number:50,value:"fifty"},{number:40,value:"forty"},{number:30,value:"thirty"},{number:20,value:"twenty"},{number:19,value:"nineteen"},{number:18,value:"eighteen"},{number:17,value:"seventeen"},{number:16,value:"sixteen"},{number:15,value:"fifteen"},{number:14,value:"fourteen"},{number:13,value:"thirteen"},{number:12,value:"twelve"},{number:11,value:"eleven"},{number:10,value:"ten"},{number:9,value:"nine"},{number:8,value:"eight"},{number:7,value:"seven"},{number:6,value:"six"},{number:5,value:"five"},{number:4,value:"four"},{number:3,value:"three"},{number:2,value:"two"},{number:1,value:"one"},{number:0,value:"zero"}],exactWordsMapping:[{number:100,value:"one hundred"}]}}}class Q{constructor(){this.config={currency:{name:"euro",plural:"euros",symbol:"\u20ac",fractionalUnit:{name:"centime",plural:"centimes",symbol:"cts"}},texts:{and:"et",minus:"moins",only:"",point:"virgule"},numberWordsMapping:[{number:1e15,value:"billiard"},{number:1e12,value:"billion"},{number:1e9,value:"milliard"},{number:1e6,value:"million"},{number:1e3,value:"mille"},{number:100,value:"cent"},{number:99,value:"quatre-vingt-dix-neuf"},{number:98,value:"quatre-vingt-dix-huit"},{number:97,value:"quatre-vingt-dix-sept"},{number:96,value:"quatre-vingt-seize"},{number:95,value:"quatre-vingt-quinze"},{number:94,value:"quatre-vingt-quatorze"},{number:93,value:"quatre-vingt-treize"},{number:92,value:"quatre-vingt-douze"},{number:91,value:"quatre-vingt-onze"},{number:90,value:"quatre-vingt-dix"},{number:89,value:"quatre-vingt-neuf"},{number:88,value:"quatre-vingt-huit"},{number:87,value:"quatre-vingt-sept"},{number:86,value:"quatre-vingt-six"},{number:85,value:"quatre-vingt-cinq"},{number:84,value:"quatre-vingt-quatre"},{number:83,value:"quatre-vingt-trois"},{number:82,value:"quatre-vingt-deux"},{number:81,value:"quatre-vingt-un"},{number:80,value:"quatre-vingt"},{number:79,value:"soixante-dix-neuf"},{number:78,value:"soixante-dix-huit"},{number:77,value:"soixante-dix-sept"},{number:76,value:"soixante-seize"},{number:75,value:"soixante-quinze"},{number:74,value:"soixante-quatorze"},{number:73,value:"soixante-treize"},{number:72,value:"soixante-douze"},{number:71,value:"soixante et onze"},{number:70,value:"soixante-dix"},{number:69,value:"soixante-neuf"},{number:68,value:"soixante-huit"},{number:67,value:"soixante-sept"},{number:66,value:"soixante-six"},{number:65,value:"soixante-cinq"},{number:64,value:"soixante-quatre"},{number:63,value:"soixante-trois"},{number:62,value:"soixante-deux"},{number:61,value:"soixante et un"},{number:60,value:"soixante"},{number:59,value:"cinquante-neuf"},{number:58,value:"cinquante-huit"},{number:57,value:"cinquante-sept"},{number:56,value:"cinquante-six"},{number:55,value:"cinquante-cinq"},{number:54,value:"cinquante-quatre"},{number:53,value:"cinquante-trois"},{number:52,value:"cinquante-deux"},{number:51,value:"cinquante et un"},{number:50,value:"cinquante"},{number:49,value:"quarante-neuf"},{number:48,value:"quarante-huit"},{number:47,value:"quarante-sept"},{number:46,value:"quarante-six"},{number:45,value:"quarante-cinq"},{number:44,value:"quarante-quatre"},{number:43,value:"quarante-trois"},{number:42,value:"quarante-deux"},{number:41,value:"quarante et un"},{number:40,value:"quarante"},{number:39,value:"trente-neuf"},{number:38,value:"trente-huit"},{number:37,value:"trente-sept"},{number:36,value:"trente-six"},{number:35,value:"trente-cinq"},{number:34,value:"trente-quatre"},{number:33,value:"trente-trois"},{number:32,value:"trente-deux"},{number:31,value:"trente et un"},{number:30,value:"trente"},{number:29,value:"vingt-neuf"},{number:28,value:"vingt-huit"},{number:27,value:"vingt-sept"},{number:26,value:"vingt-six"},{number:25,value:"vingt-cinq"},{number:24,value:"vingt-quatre"},{number:23,value:"vingt-trois"},{number:22,value:"vingt-deux"},{number:21,value:"vingt et un"},{number:20,value:"vingt"},{number:19,value:"dix-neuf"},{number:18,value:"dix-huit"},{number:17,value:"dix-sept"},{number:16,value:"seize"},{number:15,value:"quinze"},{number:14,value:"quatorze"},{number:13,value:"treize"},{number:12,value:"douze"},{number:11,value:"onze"},{number:10,value:"dix"},{number:9,value:"neuf"},{number:8,value:"huit"},{number:7,value:"sept"},{number:6,value:"six"},{number:5,value:"cinq"},{number:4,value:"quatre"},{number:3,value:"trois"},{number:2,value:"deux"},{number:1,value:"un"},{number:0,value:"z\xe9ro"}],ignoreOneForWords:["cent","mille"],pluralMark:"s",pluralWords:["billiard","billion","milliard","million"]}}}const z={localeCode:"en-US",converterOptions:{currency:!1,ignoreDecimal:!1,ignoreZeroCurrency:!1,doNotAddOnly:!1}};let G=(()=>{class n{static getInstance(t){let i=this.instances[t];return i||(i=new n({localeCode:t}),this.instances[t]=i),i}static english(t,i){return this.getInstance("en-US").convert(t,i)}static french(t,i){return this.getInstance("fr-FR").convert(t,i)}constructor(t={}){this.options={},this.locale=void 0,this.options={...z,...t}}getLocaleClass(){switch(this.options.localeCode){case"en-US":return $;case"fr-FR":return Q}throw new Error(`Unsupported locale "${this.options.localeCode}"`)}getLocale(){if(void 0===this.locale){const t=this.getLocaleClass();this.locale=new t}return this.locale}convert(t,i={}){if(i={...this.options.converterOptions,...i},!this.isValidNumber(t))throw new Error(`Invalid Number "${t}"`);i.ignoreDecimal&&(t=Number.parseInt(t.toString()));let s=[];return s=i.currency?this.convertCurrency(t,i):this.convertNumber(t),s.join(" ")}convertNumber(t){const i=this.getLocale(),s=t<0;s&&(t=Math.abs(t));const o=t.toString().split("."),r=this.isNumberZero(t)&&i.config.ignoreZeroInDecimals;let u=this.convertInternal(Number(o[0]));const c=this.isFloat(t);c&&r&&(u=[]);const p=[];if(c)if(r||p.push(i.config.texts.point),o[1].startsWith("0")&&!i.config?.decimalLengthWordMapping){const m=[];for(const v of o[1])m.push(...this.convertInternal(Number(v)));p.push(...m)}else{p.push(...this.convertInternal(Number(o[1])));const m=i.config?.decimalLengthWordMapping?.[o[1].length];m&&p.push(m)}return!(u.length<=0)&&s&&u.unshift(i.config.texts.minus),u.push(...p),u}convertCurrency(t,i={}){const s=this.getLocale(),o=i.currencyOptions??s.config.currency,r=t<0;r&&(t=Math.abs(t));const u=(t=this.toFixed(t)).toString().split(".");let c=[...this.convertInternal(Number(u[0]))];o.plural&&c.push(o.plural);const p=this.isNumberZero(t)&&(i.ignoreZeroCurrency||s.config?.ignoreZeroInDecimals&&0!==t);p&&(c=[]);const d=[];if(this.isFloat(t)){p||d.push(s.config.texts.and),d.push(...this.convertInternal(Number(u[1])*(s.config.decimalLengthWordMapping?1:Math.pow(10,2-u[1].length))));const g=s.config?.decimalLengthWordMapping?.[u[1].length];g?.length&&d.push(g),d.push(o.fractionalUnit.plural)}else s.config.decimalLengthWordMapping&&c.length&&d.push(o.fractionalUnit.plural);const v=c.length<=0&&d.length<=0;return!v&&r&&c.unshift(s.config.texts.minus),!v&&s.config.texts.only&&!i.doNotAddOnly&&!s.config.onlyInFront&&d.push(s.config.texts.only),d.length&&c.push(...d),!v&&!i.doNotAddOnly&&s.config.onlyInFront&&c.splice(0,0,s.config.texts.only),c}convertInternal(t){const i=this.getLocale();if(i.config.exactWordsMapping){const p=i.config?.exactWordsMapping?.find(d=>t===d.number);if(p)return[p.value]}const s=i.config.numberWordsMapping.find(p=>t>=p.number),o=[];if(t<=100||t<1e3&&i.config.namedLessThan1000)return o.push(s.value),(t-=s.number)>0&&(i.config?.splitWord?.length&&o.push(i.config.splitWord),o.push(...this.convertInternal(t))),o;const r=Math.floor(t/s.number),u=t%s.number;let c=s.value;return r>1&&i.config?.pluralWords?.find(p=>p===s.value)&&i.config?.pluralMark&&(c+=i.config.pluralMark),1===r&&i.config?.ignoreOneForWords?.includes(c)?o.push(c):o.push(...this.convertInternal(r),c),u>0&&(i.config?.splitWord?.length&&(i.config?.noSplitWordAfter?.find(p=>p===s.value)||o.push(i.config.splitWord)),o.push(...this.convertInternal(u))),o}toFixed(t,i=2){return Number(Number(t).toFixed(i))}isFloat(t){return Number(t)===t&&t%1!=0}isValidNumber(t){return!isNaN(parseFloat(t))&&isFinite(t)}isNumberZero(t){return t>=0&&t<1}}return n.instances={},n})();const T=["hour","minute","and","midday","midnight"],A=["heure","minute","et","midi","minuit"],R={en:T,"en-US":T,fr:A,"fr-FR":A},w=(n,a)=>a>1?`${n}s`:n;function P(n,a){const{localeCode:t,...i}=a||{};return G.getInstance(("fr"===t?"fr-FR":"en"===t?"en-US":t)||"en-US").convert(n,i)}function Z(n,a){const{hours:t,minutes:i}=n instanceof Date?{hours:n.getHours(),minutes:n.getMinutes()}:{minutes:0,...n},{localeCode:s,noAnd:o}=a||{},r=s&&R[s]||T,u=r===A,[c,p,d,m,v]=r,g=[];if(0===t)g.push(v);else if(12===t)g.push(m);else{let f=P(t,{localeCode:s});u&&(f=f.replace(/(^un$| un|\-un$)/,"$1e")),g.push(f,w(c,t))}if(i){o||g.push(d);let f=P(i,{localeCode:s});u&&(f=f.replace(/(^un$| un|\-un$)/,"$1e")),g.push(f,w(p,i))}return g.join(" ")}var H=l(3987),Y=l(9689),B=l(7582),e=l(5879),K=l(1137),N=l(7667),F=l(5744);const E=n=>{const a=[];for(let t=0;t<7;t++)a.push({date:(0,h.E4)(n,t),slots:[]});return a};function X(n){return Math.max(...n.map(({slots:a})=>a.length))}let oe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["","ui-no-availabilities-template",""]],exportAs:["uiNoAvailabilitiesTemplate"],standalone:!0}),n})(),re=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["","ui-no-week-availabilities-template",""]],exportAs:["uiNoWeekAvailabilitiesTemplate"],standalone:!0}),n})();function le(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nav",4)(1,"button",5),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.previousPage())}),e.qZA(),e.TgZ(2,"button",6),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.nextPage())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.hasPreviousPage()),e.uIk("aria-hidden",!t.hasPreviousPage()),e.xp6(1),e.Q6J("disabled",!t.hasNextPage()),e.uIk("aria-hidden",!t.hasNextPage())}}function ue(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",19)(1,"button",20),e.NdJ("click",function(s){const r=e.CHM(t).$implicit,u=e.oxw(4);return e.KtG(u.handleChoice(s,r))}),e._uU(2),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw(4);e.ekj("ui-availability-picker__slot--activated",i.isActivatedSlot(t)),e.uIk("aria-label","Cr\xe9neau de "+i.getWrittenClockTime(t)),e.xp6(1),e.uIk("aria-label",i.getWrittenClockTime(t))("aria-pressed",i.isActivatedSlot(t)),e.xp6(1),e.Oqu(i.getNumericClockTime(t))}}function ce(n,a){if(1&n&&(e.TgZ(0,"ul",17),e.YNc(1,ue,3,6,"li",18),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.uIk("aria-label","Liste des cr\xe9neaux pour le "+i.getDateVerbose(t)),e.xp6(1),e.Q6J("ngForOf",t.slots)}}function pe(n,a){if(1&n&&(e.TgZ(0,"li",9)(1,"time",10),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"span",12),e._uU(5),e.qZA(),e._uU(6),e.TgZ(7,"span",13),e._uU(8),e.qZA(),e.TgZ(9,"span",14),e._uU(10),e.qZA(),e._uU(11),e.TgZ(12,"span",15),e._uU(13),e.qZA()(),e.YNc(14,ce,2,2,"ul",16),e.qZA()),2&n){const t=a.$implicit,i=e.oxw(2);e.ekj("ui-availability-picker__day--first",i.isDayFirst(t))("ui-availability-picker__day--last",i.isDayLast(t))("ui-availability-picker__day--without-slots",!i.isDayWithSlots(t)),e.uIk("aria-label",i.isDayWithSlots(t)?"Cr\xe9neaux pour le "+i.getDateVerbose(t):"Pas de cr\xe9neaux le "+i.getDateVerbose(t)),e.xp6(1),e.Q6J("dateTime",i.getDateTime(t)),e.xp6(1),e.Oqu(i.getDateVerbose(t)),e.xp6(3),e.hij(" ",i.getDayName(t)," "),e.xp6(1),e.hij(" "," "," "),e.xp6(2),e.hij(" ",i.getDayMonthName(t)," "),e.xp6(2),e.hij(" ",i.getDayNameAbbreviated(t)," "),e.xp6(1),e.hij(" "," "," "),e.xp6(2),e.hij(" ",i.getDayMonthNameAbbreviated(t)," "),e.xp6(1),e.Q6J("ngIf",i.isDayWithSlots(t))}}function he(n,a){if(1&n&&(e.TgZ(0,"ul",7),e.YNc(1,pe,15,16,"li",8),e.qZA()),2&n){const t=e.oxw();e.Gre("ui-availability-picker__days height-",t.hasAvailabilitiesInCurrentPage()?t.getSlotsDaysMaxSize():0,""),e.ekj("without-slots",!t.hasAvailabilitiesInCurrentPage()),e.xp6(1),e.Q6J("ngForOf",t.currentDays)}}function de(n,a){1&n&&(e.TgZ(0,"div",21)(1,"p"),e._uU(2,"Aucune disponibilit\xe9 cette semaine"),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Consultez les cr\xe9neaux des autres semaines."),e.qZA()())}function ge(n,a){1&n&&e.GkF(0)}function me(n,a){if(1&n&&(e.TgZ(0,"div",21),e.YNc(1,ge,1,0,"ng-container",22),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t.noWeekAvailabilitiesTemplate)}}function ve(n,a){1&n&&(e.TgZ(0,"div",23)(1,"p"),e._uU(2,"Aucune disponibilit\xe9"),e.qZA()())}function fe(n,a){1&n&&e.GkF(0)}function _e(n,a){if(1&n&&(e.TgZ(0,"div",23),e.YNc(1,fe,1,0,"ng-container",22),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t.noAvailabilitiesTemplate)}}class _{get activatedSlots(){return this._activatedSlots}set activatedSlots(a){this.setActivatedSlots(a)}get suggestedSlot(){return this._suggestedSlot}set suggestedSlot(a){this.setSuggestedSlot(a)}get slots(){return this._slots}set slots(a){this.setSlots(a)}get wide(){return this._wide}set wide(a){this._wide=a,this.refreshCurrentSlot()}get currentDays(){return this.currentSlotsDays}get daysMarkersIndexes(){return Array.from(Array(this.getSlotsDaysMaxSize()).keys())}constructor(a){this.changeDetectorRef=a,this._activatedSlots=[],this._slots=[],this._wide=!1,this.slotSelected=new e.vpe,this.daysOptional=[],this.slotsDays=[],this.slotsDaysPages=[],this.slotsDaysPageIndex=0,this.slotsDaysMaxSizeByPage=[],this.slotsDaysOptional=this.daysOptional,this.currentSlotsDays=[],this.currentSlotsDaysSize=0}ngAfterViewInit(){if((!this.hasAvailabilities()&&this.noAvailabilitiesTemplate||!this.hasAvailabilitiesInCurrentPage()&&this.noWeekAvailabilitiesTemplate)&&this.changeDetectorRef.markForCheck(),this.hasAvailabilities()&&(this.activatedSlots?.length||this.suggestedSlot)){const a=(this.activatedSlots?[...this.activatedSlots]:[]).filter(t=>!!t).sort((t,i)=>t.getTime()-i.getTime()).shift()||this.suggestedSlot;this.setSlotIndexThatCanContainTheGivenSlot(a)}}getDateTime(a){return(0,h.p6)(a.date,"yyyy-MM-dd")}getDateVerbose(a){return(0,h.p6)(a.date,"EEEE d LLLL yyyy")}getDayName(a){return(0,h.p6)(a.date,"EEEE")}getDayNameAbbreviated(a){return(0,h.p6)(a.date,"EEE")}getDayMonthName(a){return(0,h.p6)(a.date,"d LLLL")}getDayMonthNameAbbreviated(a){return(0,h.p6)(a.date,"d LLL")}getNumericClockTime(a){return(0,h.p6)(a,"HH:mm")}getSlotsDaysMaxSize(){return this.slotsDaysMaxSizeByPage[this.slotsDaysPageIndex]||0}getWrittenClockTime(a){return Z(a,{localeCode:"fr"})}isActivatedSlot(a){for(const t of this.activatedSlots)if(t.getTime()===a.getTime())return!0;return!1}handleChoice(a,t){a.preventDefault(),this.slotSelected.emit(t)}hasAvailabilities(){return this.slots.length>0}hasAvailabilitiesInCurrentPage(){return this.currentSlotsDaysSize>0}hasNextPage(){return this.slotsDaysPageIndex+1<this.slotsDaysPages.length}hasPreviousPage(){return this.slotsDaysPageIndex>0}isDayWithSlots(a){return a.slots.length>0}isDayFirst(a){return a===this.currentDays.find(t=>t.slots.length>0)}isDayLast(a){return a===[...this.currentDays].reverse().find(t=>t.slots.length>0)}nextPage(){this.setSlotIndex(this.slotsDaysPageIndex+1)}previousPage(){this.setSlotIndex(this.slotsDaysPageIndex-1)}setActivatedSlots(a){a!==this._activatedSlots&&(this._activatedSlots=a,a.length&&this.setSlotIndexThatCanContainTheGivenSlot(a[0]))}setSuggestedSlot(a){a!==this._suggestedSlot&&(this._suggestedSlot=a,this.activatedSlots.length||this.setSlotIndexThatCanContainTheGivenSlot(a))}setSlotIndexThatCanContainTheGivenSlot(a){const t=function ie(n,a){if(!n.length||isNaN(a?.getTime()))return-1;let t=0;if(n.length>1&&a.getTime()>=n[0][0]?.date.getTime()){for(;t<n.length;++t){const s=n[t+1]?.[0];if(a.getTime()<s?.date.getTime())break}t>n.length-1&&(t=n.length-1)}return t}(this.slotsDaysPages,a);-1!==t&&this.setSlotIndex(t)}refreshCurrentSlot(){let a=this.slotsDays;this.wide&&(a=function ne(n,a,t=[]){let i=n[a];return t.length&&(i=[...i],[...t].sort().reverse().forEach(s=>i.splice(s,1))),i}(this.slotsDaysPages,this.slotsDaysPageIndex,this.slotsDaysOptional)),this.currentSlotsDays=a,this.currentSlotsDaysSize=function te(n){return n.reduce((a,t)=>a+t.slots.length,0)}(a),this.changeDetectorRef.detectChanges()}setSlots(a){this._slots=a,this.slotsDays=function ae(n){if(!n.length)return[];const a=[...n].sort((i,s)=>i.getTime()-s.getTime()),t={};for(const i of a){const s=(0,h.b7)(i),o=s.getTime();let r=t[o];r||(r={date:s,slots:[]},t[o]=r),r.slots.push(i)}return Object.keys(t).map(i=>t[i])}(this._slots),this.slotsDaysPages=function se(n,a){if(!n.length)return[E((0,h.zJ)(new Date))];const t=!!a?.skipEmptyWeek,i=[];let s=-1,o=0,r=0;for(const u of n){const c=u.date.getTime();for(;c>=r;)o=-1===s||t?(0,h.zJ)(u.date).getTime():(0,h.E4)(o,7).getTime(),r=(0,h.E4)(o,7).getTime(),i[++s]=E(o);const p=+(0,h.p6)(c,"i");i[s][p-1].slots=u.slots}return i}(this.slotsDays),this.slotsDaysMaxSizeByPage=function ee(n){return n.map(X)}(this.slotsDaysPages),this.slotsDaysOptional=function V(n,a){if(!n.length)return a;const t=[];for(const i of a)0===n.reduce((o,r)=>o+r[i].slots.length,0)&&t.push(i);return t}(this.slotsDaysPages,this.daysOptional),this.slotsDaysPageIndex=0,this.refreshCurrentSlot()}setSlotIndex(a){a!==this.slotsDaysPageIndex&&(this.slotsDaysPageIndex=a,this.refreshCurrentSlot())}}_.\u0275fac=function(a){return new(a||_)(e.Y36(e.sBO))},_.\u0275cmp=e.Xpm({type:_,selectors:[["ui-availability-picker"]],contentQueries:function(a,t,i){if(1&a&&(e.Suo(i,oe,5,e.Rgc),e.Suo(i,re,5,e.Rgc)),2&a){let s;e.iGM(s=e.CRH())&&(t.noAvailabilitiesTemplate=s.first),e.iGM(s=e.CRH())&&(t.noWeekAvailabilitiesTemplate=s.first)}},hostVars:4,hostBindings:function(a,t){2&a&&e.ekj("ui-availability-picker",!0)("ui-availability-picker--wide",t.wide)},inputs:{activatedSlots:"activatedSlots",suggestedSlot:"suggestedSlot",slots:"slots",wide:"wide"},outputs:{slotSelected:"slotSelected"},standalone:!0,features:[e.jDz],decls:6,vars:6,consts:[["aria-label","Navigation entre les semaines de cr\xe9neaux","class","ui-availability-picker__actions",4,"ngIf"],["aria-label","Liste des cr\xe9neaux",3,"class","without-slots",4,"ngIf"],["class","ui-availability-picker__no-week-availabilities",4,"ngIf"],["class","ui-availability-picker__no-availabilities",4,"ngIf"],["aria-label","Navigation entre les semaines de cr\xe9neaux",1,"ui-availability-picker__actions"],["type","button","title","Afficher les cr\xe9neaux de la semaine pr\xe9c\xe9dente","ui-icon","ionicon:chevron-back","ui-ripple","","ui-ripple-centered","",1,"ui-availability-picker__action","ui-availability-picker__action--left",3,"disabled","click"],["type","button","title","Afficher les cr\xe9neaux de la semaine suivante","ui-icon","ionicon:chevron-forward","ui-ripple","","ui-ripple-centered","",1,"ui-availability-picker__action","ui-availability-picker__action--right",3,"disabled","click"],["aria-label","Liste des cr\xe9neaux"],["class","ui-availability-picker__day",3,"ui-availability-picker__day--first","ui-availability-picker__day--last","ui-availability-picker__day--without-slots",4,"ngFor","ngForOf"],[1,"ui-availability-picker__day"],[1,"ui-availability-picker__datetime",3,"dateTime"],["aria-hidden","true",1,"ui-availability-picker__day-title"],[1,"ui-availability-picker__day-of-week"],[1,"ui-availability-picker__day-month"],[1,"ui-availability-picker__day-of-week","ui-availability-picker__day-of-week--abbreviated"],[1,"ui-availability-picker__day-month","ui-availability-picker__day-month--abbreviated"],["class","ui-availability-picker__slots",4,"ngIf"],[1,"ui-availability-picker__slots"],["class","ui-availability-picker__slot",3,"ui-availability-picker__slot--activated",4,"ngFor","ngForOf"],[1,"ui-availability-picker__slot"],["type","button","ui-ripple","",1,"ui-availability-picker__slot-button",3,"click"],[1,"ui-availability-picker__no-week-availabilities"],[4,"ngTemplateOutlet"],[1,"ui-availability-picker__no-availabilities"]],template:function(a,t){1&a&&(e.YNc(0,le,3,4,"nav",0),e.YNc(1,he,2,6,"ul",1),e.YNc(2,de,5,0,"div",2),e.YNc(3,me,2,1,"div",2),e.YNc(4,ve,3,0,"div",3),e.YNc(5,_e,2,1,"div",3)),2&a&&(e.Q6J("ngIf",t.wide),e.xp6(1),e.Q6J("ngIf",t.wide||t.hasAvailabilitiesInCurrentPage()),e.xp6(1),e.Q6J("ngIf",t.hasAvailabilities()&&!t.hasAvailabilitiesInCurrentPage()&&!t.noWeekAvailabilitiesTemplate),e.xp6(1),e.Q6J("ngIf",t.hasAvailabilities()&&!t.hasAvailabilitiesInCurrentPage()&&t.noWeekAvailabilitiesTemplate),e.xp6(1),e.Q6J("ngIf",!t.hasAvailabilities()&&!t.noAvailabilitiesTemplate),e.xp6(1),e.Q6J("ngIf",!t.hasAvailabilities()&&t.noAvailabilitiesTemplate))},dependencies:[b.ax,b.O5,b.tP,F.N,N.l],encapsulation:2,changeDetection:0}),(0,B.gn)([(0,K.x)()],_.prototype,"wide",null);var be=l(2627),xe=l(5509),Se=l(2023),ye=l(7213),Te=l(3120);function Ae(n,a){1&n&&(e.TgZ(0,"li",14)(1,"a",15),e.NdJ("click",function(i){return i.preventDefault()}),e._UZ(2,"span",16),e.TgZ(3,"span",3),e._uU(4,"Contacter"),e.qZA()()())}function Ze(n,a){1&n&&(e.TgZ(0,"li",14)(1,"a",15),e.NdJ("click",function(i){return i.preventDefault()}),e._UZ(2,"span",17),e.TgZ(3,"span",3),e._uU(4,"Localiser"),e.qZA()()())}function ke(n,a){1&n&&(e.TgZ(0,"li",14)(1,"a",15),e.NdJ("click",function(i){return i.preventDefault()}),e._UZ(2,"span",18),e.TgZ(3,"span",3),e._uU(4,"Partarger"),e.qZA()()())}function Ce(n,a){if(1&n&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("@fade",void 0),e.xp6(1),e.hij(" "," \u2022 "+t.getSelectedDatetimeLabel()," ")}}function De(n,a){1&n&&e._UZ(0,"span",24)}function Ue(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",19)(1,"button",20),e.NdJ("click",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o._onContinueButtonClick(s))}),e.TgZ(2,"span",21),e._uU(3),e.qZA(),e.TgZ(4,"span",21),e._uU(5),e.YNc(6,Ce,2,2,"strong",22),e.qZA(),e.TgZ(7,"span",21),e._uU(8),e.qZA(),e.YNc(9,De,1,0,"span",23),e.qZA()()}if(2&n){const t=e.oxw();e.Udp("bottom",t.offsetBottom,"px"),e.Q6J("@fade",void 0),e.xp6(1),e.ekj("continue-button--disabled",t.shopStep2||t.shopStep1&&!t.hasSelectedDatetime()),e.Q6J("ui-ripple-disabled",t.shopStep2||t.shopStep1&&!t.hasSelectedDatetime()),e.uIk("aria-label",t.continueLabel)("tabindex",t.shopStep2||t.shopStep1&&!t.hasSelectedDatetime()?-1:null),e.xp6(2),e.hij(" ",t.itemsTotal," "),e.xp6(2),e.hij(" ",29*t.itemsTotal,"\u20ac "),e.xp6(1),e.Q6J("ngIf",!t.shopStep0&&t.hasSelectedDatetime()),e.xp6(2),e.hij(" ",t.shopStep2?t.secondsToWaitBeforeConfirmation?"Confirmation dans "+t.secondsToWaitBeforeConfirmation+"s...":t.userAuthenticated?"Confirmation en cours...":"Confirmation en attente...":t.shopStep1?"Je confirme mon horaire":"Je choisis mon horaire"," "),e.xp6(1),e.Q6J("ngIf",t.shopStep2)}}function qe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"section",25)(1,"h3",26),e._uU(2,"Tarifs"),e.qZA(),e.TgZ(3,"div",27)(4,"h4",28),e._uU(5,"Coupe homme"),e.qZA(),e.TgZ(6,"ul",29)(7,"li",30)(8,"label",31)(9,"span",32),e._uU(10,"Coupe homme classique"),e.qZA(),e._uU(11),e.TgZ(12,"span",33),e._uU(13,"30min"),e.qZA(),e._uU(14),e.TgZ(15,"span",34),e._uU(16,"29\u20ac"),e.qZA(),e._uU(17),e.TgZ(18,"input",35),e.NdJ("change",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o._onShopPriceCheckedChange(s))}),e.qZA(),e.O4$(),e.TgZ(19,"svg",36),e._UZ(20,"path",37),e.qZA()()(),e.kcU(),e.TgZ(21,"li",38)(22,"label",39)(23,"span",32),e._uU(24,"Shampoing & Coupe Homme"),e.qZA(),e._uU(25),e.TgZ(26,"span",33),e._uU(27,"30min"),e.qZA(),e._uU(28),e.TgZ(29,"span",34),e._uU(30,"29\u20ac"),e.qZA(),e._uU(31),e.TgZ(32,"input",35),e.NdJ("change",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o._onShopPriceCheckedChange(s))}),e.qZA(),e.O4$(),e.TgZ(33,"svg",36),e._UZ(34,"path",37),e.qZA()()(),e.kcU(),e.TgZ(35,"li",38)(36,"label",39)(37,"span",32),e._uU(38,"Coupe de cheveux \xe0 la tondeuse Homme"),e.qZA(),e._uU(39),e.TgZ(40,"span",33),e._uU(41,"30min"),e.qZA(),e._uU(42),e.TgZ(43,"span",34),e._uU(44,"29\u20ac"),e.qZA(),e._uU(45),e.TgZ(46,"input",35),e.NdJ("change",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o._onShopPriceCheckedChange(s))}),e.qZA(),e.O4$(),e.TgZ(47,"svg",36),e._UZ(48,"path",37),e.qZA()()(),e.kcU(),e.TgZ(49,"li",38)(50,"label",39)(51,"span",32),e._uU(52,"Coupe de cheveux - \xe9tudiant"),e.qZA(),e._uU(53),e.TgZ(54,"span",33),e._uU(55,"30min"),e.qZA(),e._uU(56),e.TgZ(57,"span",34),e._uU(58,"29\u20ac"),e.qZA(),e._uU(59),e.TgZ(60,"input",35),e.NdJ("change",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o._onShopPriceCheckedChange(s))}),e.qZA(),e.O4$(),e.TgZ(61,"svg",36),e._UZ(62,"path",37),e.qZA()()(),e.kcU(),e.TgZ(63,"li",38)(64,"label",39)(65,"span",32),e._uU(66,"Shampoing, Massage cr\xe2nien & Coupe de cheveux pour les hommes"),e.qZA(),e._uU(67),e.TgZ(68,"span",33),e._uU(69,"30min"),e.qZA(),e._uU(70),e.TgZ(71,"span",34),e._uU(72,"29\u20ac"),e.qZA(),e._uU(73),e.TgZ(74,"input",35),e.NdJ("change",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o._onShopPriceCheckedChange(s))}),e.qZA(),e.O4$(),e.TgZ(75,"svg",36),e._UZ(76,"path",37),e.qZA()()()()(),e.kcU(),e.TgZ(77,"div",27)(78,"h4",28),e._uU(79,"\xc9pilation"),e.qZA(),e.TgZ(80,"ul",29)(81,"li",38)(82,"label",39)(83,"span",32),e._uU(84,"Epilation \xe0 la cire des aisselles"),e.qZA(),e._uU(85),e.TgZ(86,"span",33),e._uU(87,"30min"),e.qZA(),e._uU(88),e.TgZ(89,"span",34),e._uU(90,"29\u20ac"),e.qZA(),e._uU(91),e.TgZ(92,"input",35),e.NdJ("change",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o._onShopPriceCheckedChange(s))}),e.qZA(),e.O4$(),e.TgZ(93,"svg",36),e._UZ(94,"path",37),e.qZA()()(),e.kcU(),e.TgZ(95,"li",38)(96,"label",39)(97,"span",32),e._uU(98,"\xc9pilation \xe0 la cire du menton"),e.qZA(),e._uU(99),e.TgZ(100,"span",33),e._uU(101,"30min"),e.qZA(),e._uU(102),e.TgZ(103,"span",34),e._uU(104,"29\u20ac"),e.qZA(),e._uU(105),e.TgZ(106,"input",35),e.NdJ("change",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o._onShopPriceCheckedChange(s))}),e.qZA(),e.O4$(),e.TgZ(107,"svg",36),e._UZ(108,"path",37),e.qZA()()(),e.kcU(),e.TgZ(109,"li",38)(110,"label",39)(111,"span",32),e._uU(112,"\xc9pilation \xe0 la cire du dos Homme"),e.qZA(),e._uU(113),e.TgZ(114,"span",33),e._uU(115,"30min"),e.qZA(),e._uU(116),e.TgZ(117,"span",34),e._uU(118,"29\u20ac"),e.qZA(),e._uU(119),e.TgZ(120,"input",35),e.NdJ("change",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o._onShopPriceCheckedChange(s))}),e.qZA(),e.O4$(),e.TgZ(121,"svg",36),e._UZ(122,"path",37),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(11),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(1),e.Q6J("checked",t.isItemChecked(0)),e.xp6(7),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(1),e.Q6J("checked",t.isItemChecked(1)),e.xp6(7),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(1),e.Q6J("checked",t.isItemChecked(2)),e.xp6(7),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(1),e.Q6J("checked",t.isItemChecked(3)),e.xp6(7),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(1),e.Q6J("checked",t.isItemChecked(4)),e.xp6(11),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(1),e.Q6J("checked",t.isItemChecked(5)),e.xp6(7),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(1),e.Q6J("checked",t.isItemChecked(6)),e.xp6(7),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(1),e.Q6J("checked",t.isItemChecked(7))}}function Ie(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",49)(1,"span",50),e._uU(2,"Shampoing & Coupe Homme"),e.qZA(),e._uU(3),e.TgZ(4,"span",51),e._uU(5,"30min"),e.qZA(),e._uU(6),e.TgZ(7,"span",52),e._uU(8,"29\u20ac"),e.qZA(),e._uU(9),e.TgZ(10,"button",53),e.NdJ("click",function(s){const r=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u._onItemRemoveButtonClick(s,r))}),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.Q6J("@fold",void 0),e.xp6(3),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(3),e.hij(" "," "," "),e.xp6(1),e.Udp("visibility",i.confirmating?"hidden":null),e.Q6J("disabled",i.confirmating),e.uIk("aria-hidden",!!i.confirmating||null)("aria-label","Supprimer "+t)}}function we(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ui-availability-picker",54),e.NdJ("slotSelected",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o._onAvailabilitySelected(s))}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("slots",t.slots)("activatedSlots",t.activatedSlots)("suggestedSlot",t.suggestedSlot)("wide",t.wide)}}function Pe(n,a){if(1&n&&(e.TgZ(0,"p",50)(1,"time",55),e._uU(2),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("dateTime",t.getSelectedDatetimeISO()),e.xp6(1),e.Oqu(t.getSelectedDatetimeLabel())}}const Ne=function(){return[".","reservation"]};function Fe(n,a){if(1&n&&(e.TgZ(0,"div",43)(1,"a",44),e.NdJ("click",function(i){return i.preventDefault()}),e._UZ(2,"span",56),e.TgZ(3,"span"),e._uU(4,"Changer l'horaire de rendez-vous"),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(1),e.ekj("shop-meeting__action-button--disabled",t.shopStep2&&t.confirmating),e.Q6J("routerLink",t.shopStep2&&t.confirmating?null:e.DdM(3,Ne))}}const Ee=function(){return["."]};function Le(n,a){if(1&n&&(e.TgZ(0,"section",40)(1,"h3",1),e._uU(2),e.qZA(),e.TgZ(3,"p",28),e._uU(4),e.qZA(),e.TgZ(5,"ul",41),e.YNc(6,Ie,11,9,"li",42),e.qZA(),e.TgZ(7,"div",43)(8,"a",44),e.NdJ("click",function(i){return i.preventDefault()}),e._UZ(9,"span",45),e.TgZ(10,"span"),e._uU(11,"Ajouter une autre prestation"),e.qZA()()(),e.TgZ(12,"p",28),e._uU(13),e.qZA(),e.YNc(14,we,1,4,"ui-availability-picker",46),e.YNc(15,Pe,3,2,"p",47),e.YNc(16,Fe,5,4,"div",48),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.shopStep2?"Confirmation":"R\xe9servation"," "),e.xp6(2),e.AsE(" Prestation",t.itemsTotal>1?"s":""," s\xe9lectionn\xe9e",t.itemsTotal>1?"s":""," "),e.xp6(2),e.Q6J("ngForOf",t.items),e.xp6(2),e.ekj("shop-meeting__action-button--disabled",t.shopStep2&&t.confirmating),e.Q6J("routerLink",t.shopStep2&&t.confirmating?null:e.DdM(11,Ee)),e.xp6(5),e.hij(" ",t.shopStep2?"Horaire de rendez-vous s\xe9lectionn\xe9":"Choisir un horaire de rendez-vous"," "),e.xp6(1),e.Q6J("ngIf",t.shopStep1),e.xp6(1),e.Q6J("ngIf",t.shopStep2),e.xp6(1),e.Q6J("ngIf",t.shopStep2)}}let Oe=(()=>{class n{get backUrl(){return this.shopStep2?[".","reservation"]:this.shopStep1?["."]:this.routerFacade.backUrl({steps:1,defaultUrl:"/",predicate:t=>!t.url.startsWith(`/etablissements/${this.venueUid}`)})}get continueLabel(){return this.shopStep2?this.continueLabelOnShopStep2:this.shopStep1?this.continueLabelOnShopStep1:this.continueLabelOnShopStep0}get continueLabelOnShopStep0(){const t=this.itemsTotal;return`Choisir mon horaire pour ${t} prestation(s) d'un montant total de ${29*t} euros`}get continueLabelOnShopStep1(){const t=this.cartFacade.getDatetime(this.venueUid);if(!t)return this.continueLabelOnShopStep0;const i=this.itemsTotal,s=new Date(t);return`Confirmer mon horaire pour ${i} prestation(s) d'un montant total de ${29*i} euros le ${(0,h.p6)(s,"EEEE d LLLL")+" \xe0 "+Z(s,{localeCode:"fr"})}`}get continueLabelOnShopStep2(){const t=this.cartFacade.getDatetime(this.venueUid);if(!t)return this.continueLabelOnShopStep0;const i=this.itemsTotal,s=new Date(t);return`Confirmation en cours pour ${i} prestation(s) d'un montant total de ${29*i} euros le ${(0,h.p6)(s,"EEEE d LLLL")+" \xe0 "+Z(s,{localeCode:"fr"})}`}get items(){return this.cartFacade.getItems(this.venueUid)}get itemsTotal(){return this.cartFacade.getItemsTotal(this.venueUid)}get offsetBottom(){return this.scrollService.computeOffset("bottom")+24}get shopStep(){return this.routerFacade.getRouteDataForKey("shopStep",0)}get shopStep0(){return 0===this.shopStep}get shopStep1(){return 1===this.shopStep}get shopStep2(){return 2===this.shopStep}get userAuthenticated(){return this.authFacade.authenticated()}get venue(){return this.venueUid&&I.P.offers.find(({provider:t})=>t===this.venueUid)||I.P.offers[0]}get wide(){return this.breakpoints.md.up()}get activatedSlots(){const t=this.cartFacade.getDatetime(this.venueUid);return t!==this._activatedSlotsSource&&(this._activatedSlots=t?[new Date(t)]:[],this._activatedSlotsSource=t),this._activatedSlots}get suggestedSlot(){const t=this.cartFacade.getPreferentialDate(this.venueUid);return t!==this._suggestedSlotSource&&(this._suggestedSlot=t?(0,h.sG)(t,"yyyyMMdd"):null,this._suggestedSlotSource=t),this._suggestedSlot}constructor(t,i,s,o,r,u,c){this.elementRef=t,this.changeDetectorRef=i,this.breakpoints=s,this.scrollService=o,this.authFacade=r,this.routerFacade=u,this.cartFacade=c,this._activatedSlots=[],this._activatedSlotsSource="",this._suggestedSlot=null,this._suggestedSlotSource="",this.slots=[new Date(2023,9,11,9,0),new Date(2023,9,11,9,30),new Date(2023,9,11,10,0),new Date(2023,9,11,11,30),new Date(2023,9,11,14,0),new Date(2023,9,11,14,30),new Date(2023,9,11,15,0),new Date(2023,9,11,15,30),new Date(2023,9,12,9,0),new Date(2023,9,12,9,30),new Date(2023,9,12,10,0),new Date(2023,9,13,10,0),new Date(2023,9,13,11,30),new Date(2023,9,13,14,0),new Date(2023,9,13,14,30),new Date(2023,9,13,15,0),new Date(2023,9,13,15,30),new Date(2023,9,14,9,0),new Date(2023,9,14,9,30),new Date(2023,9,14,10,0),new Date(2023,9,14,11,30),new Date(2023,9,14,14,0),new Date(2023,9,14,14,30),new Date(2023,9,14,15,0),new Date(2023,9,14,15,30),new Date(2023,9,19,9,0),new Date(2023,9,19,9,30),new Date(2023,9,19,10,0),new Date(2023,9,19,10,30),new Date(2023,9,19,11,0),new Date(2023,9,19,11,30),new Date(2023,9,19,14,0),new Date(2023,9,19,14,30),new Date(2023,9,19,15,0),new Date(2023,9,19,15,30),new Date(2023,9,19,19,0),new Date(2023,9,19,19,30),new Date(2023,9,19,17,0),new Date(2023,9,19,17,30),new Date(2023,9,19,18,0),new Date(2023,9,19,18,30),new Date(2023,9,19,19,0),new Date(2023,10,7,15,0)],this.secondsToWaitBeforeConfirmationDefault=5,this.secondsToWaitBeforeConfirmation=this.secondsToWaitBeforeConfirmationDefault,this.confirmating=!1,this.destroyed$=new O.x}ngOnInit(){const t=this.routerFacade.ofRouteParamForKey("venueUid","",{fromAll:!0}),i=t.pipe((0,S.w)(o=>this.cartFacade.ofEntity(o))),s=this.routerFacade.ofRouteDataForKey("shopStep",0);(0,C.T)(this.breakpoints.viewportChanges$,t,i,s,this.authFacade.authenticated$,this.scrollService.observeOffset("bottom")).pipe((0,x.R)(this.destroyed$),(0,W.b)(0)).subscribe(()=>{this.changeDetectorRef.markForCheck()}),t.pipe((0,x.R)(this.destroyed$),(0,S.w)(o=>this.cartFacade.ofItemsTotal(o))).subscribe(o=>{this.shopStep>0&&!o&&this.routerFacade.navigateToUrl(`/etablissements/${this.venueUid}`)}),(0,C.T)(s,t,i,this.authFacade.authenticated$).pipe((0,x.R)(this.destroyed$),(0,D.h)(()=>2===this.shopStep&&this.itemsTotal>0),(0,S.w)(()=>(this.confirmating=!1,this.secondsToWaitBeforeConfirmation=this.secondsToWaitBeforeConfirmationDefault,this.changeDetectorRef.markForCheck(),(0,J.F)(1e3).pipe((0,x.R)(this.destroyed$),(0,x.R)(s.pipe((0,D.h)(o=>2!==o),(0,U.q)(1))),(0,U.q)(this.secondsToWaitBeforeConfirmation)))),(0,S.w)(()=>{if(this.secondsToWaitBeforeConfirmation--,this.changeDetectorRef.markForCheck(),this.secondsToWaitBeforeConfirmation>0)return y.C;const o=this.cartFacade.getItems(this.venueUid);if(!o.length)return this.routerFacade.navigateToUrl(`/etablissements/${this.venueUid}`),y.C;const r=this.cartFacade.getDatetime(this.venueUid);return r?this.authFacade.authenticated()?(this.confirmating=!0,this.changeDetectorRef.markForCheck(),(0,M.of)({venue:this.venueUid,items:o,datetime:r})):(this.authFacade.inviteLogin(`Identifiez-vous pour confirmer votre rendez-vous chez ${this.venue.provider}`,`/etablissements/${this.venueUid}/confirmation`),y.C):(this.routerFacade.navigateToUrl(`/etablissements/${this.venueUid}/reservation`),y.C)})).subscribe(({venue:o,datetime:r,items:u})=>{this.cartFacade.confirmRequest(o,r,u)})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getSelectedDatetimeLabel(){const t=this.cartFacade.getDatetime(this.venueUid);return t?(0,h.p6)(new Date(t),"EEEE d LLLL HH:mm"):""}getSelectedDatetimeISO(){const t=this.cartFacade.getDatetime(this.venueUid);return t?new Date(t).toISOString():""}hasSelectedDatetime(){return!!this.cartFacade.getDatetime(this.venueUid)}isItemChecked(t){return this.cartFacade.isItemChecked(this.venueUid,t.toString())}changeDatetime(t){t.toISOString()===this.cartFacade.getDatetime(this.venueUid)?this.cartFacade.unselectDatetime(this.venueUid):this.cartFacade.selectDatetime(this.venueUid,t.toISOString()),this.changeDetectorRef.markForCheck()}_onActionButtonWhichIsRouterLinkClick(t){t.preventDefault()}_onAvailabilitySelected(t){this.changeDatetime(t)}_onContinueButtonClick(t){t.preventDefault(),this.shopStep1?this.routerFacade.navigateToUrl(`/etablissements/${this.venueUid}/confirmation`):this.shopStep0&&this.routerFacade.navigateToUrl(`/etablissements/${this.venueUid}/reservation`)}_onItemRemoveButtonClick(t,i){t.preventDefault(),this.cartFacade.removeItem(this.venueUid,i)}_onShopPriceCheckedChange(t){const i=t.target,s=this.elementRef.nativeElement.querySelectorAll(".shop-prices__item > input[type=checkbox"),o=(0,j.rm)(s,i);-1!==o&&this.cartFacade.toggleItem(this.venueUid,o.toString())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(be.u),e.Y36(xe.a),e.Y36(Se.j),e.Y36(ye.f),e.Y36(Te.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-shop-page"]],hostVars:2,hostBindings:function(t,i){2&t&&e.ekj("app-shop-page",!0)},inputs:{venueUid:"venueUid"},standalone:!0,features:[e.jDz],decls:25,vars:14,consts:[[3,"uiAriaLabelledby"],[1,"ui-heading-5"],["venueTitle",""],[1,"ui-label-2"],["type","button","ui-ripple","","ui-ripple-centered","","ui-ripple-unbounded","",1,"favorite-button",3,"click"],["aria-hidden","true","ui-icon","ionicon:heart"],["heartIcon","uiIcon"],["aria-label","Retour","ui-icon","clover:back","ui-ripple","","ui-ripple-centered","","ui-ripple-unbounded","",1,"back-button","ui-button",3,"routerLink"],[1,"shop-menu"],["role","menubar"],["role","none",4,"ngIf"],["role","none","class","shop-menu__fabs",3,"bottom",4,"ngIf"],["class","shop-prices",4,"ngIf"],["class","shop-meeting","style","position:relative",4,"ngIf"],["role","none"],["href","#","role","menuitem","ui-ripple","","ui-ripple-centered","",3,"click"],["aria-hidden","true","ui-icon","clover:phone"],["aria-hidden","true","ui-icon","clover:pin"],["aria-hidden","true","ui-icon","clover:share"],["role","none",1,"shop-menu__fabs"],["type","button","ui-ripple","",1,"continue-button","ui-font-weight--bold",3,"ui-ripple-disabled","click"],["aria-hidden","true"],[4,"ngIf"],["aria-hidden","true","class","ui-infinite-spinner",4,"ngIf"],["aria-hidden","true",1,"ui-infinite-spinner"],[1,"shop-prices"],[1,"ui-sr-only"],[1,"shop-prices__category"],[1,"ui-heading-6"],[1,"ui-item-grid"],[1,"ui-item-grid__cell"],["ui-ripple","",1,"shop-prices__item"],[1,"shop-prices__item-name","ui-label-1"],[1,"shop-prices__item-duration","ui-label-2","ui-dark-3"],[1,"shop-prices__item-price","ui-paragraph-2"],["type","checkbox",1,"ui-checkbox","ui-checkbox--circle",3,"checked","change"],["aria-hidden","true","viewBox","0 0 24 24","focusable","false","xmlns","http://www.w3.org/2000/svg"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59"],["ui-ripple","",1,"ui-item-grid__cell"],[1,"shop-prices__item"],[1,"shop-meeting",2,"position","relative"],[1,"shop-meeting__items"],["class","shop-meeting__item",4,"ngFor","ngForOf"],[1,"shop-meeting__actions"],["ui-ripple","",1,"shop-meeting__action-button",3,"routerLink","click"],["aria-hidden","true","ui-icon","misc:plus_in_circle"],[3,"slots","activatedSlots","suggestedSlot","wide","slotSelected",4,"ngIf"],["class","ui-label-1",4,"ngIf"],["class","shop-meeting__actions",4,"ngIf"],[1,"shop-meeting__item"],[1,"ui-label-1"],[1,"ui-label-2","ui-dark-3"],[1,"ui-paragraph-2"],["type","button","ui-icon","clover:close","ui-ripple","","ui-ripple-centered","",1,"shop-meeting__remove-item-action","ui-label-1",3,"disabled","click"],[3,"slots","activatedSlots","suggestedSlot","wide","slotSelected"],[3,"dateTime"],["aria-hidden","true","ui-icon","clover:calendar"]],template:function(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"header",0),e.ALo(1,"baseUrl"),e.TgZ(2,"hgroup")(3,"h2",1,2),e._uU(5,"Woodlands Hills Salon"),e.qZA(),e.TgZ(6,"p",3),e._uU(7," Pour hommes "),e.qZA(),e.TgZ(8,"p"),e._uU(9,"Keira throughway \u2022 5.0 Kms \u2022 $$"),e.qZA(),e.TgZ(10,"button",4),e.NdJ("click",function(){e.CHM(s);const r=e.MAs(12);return e.KtG(r.setIcon("ionicon:heart"===r.icon?"ionicon:heart--filled":"ionicon:heart"))}),e._UZ(11,"span",5,6),e.TgZ(13,"span",3),e._uU(14,"Favoris"),e.qZA()()(),e.TgZ(15,"nav"),e._UZ(16,"a",7),e.qZA()(),e.TgZ(17,"nav",8)(18,"ul",9),e.YNc(19,Ae,5,0,"li",10),e.YNc(20,Ze,5,0,"li",10),e.YNc(21,ke,5,0,"li",10),e.YNc(22,Ue,10,13,"li",11),e.qZA()(),e.YNc(23,qe,123,32,"section",12),e.YNc(24,Le,17,12,"section",13)}if(2&t){const s=e.MAs(4),o=e.MAs(12);e.Udp("background-image",e.xi3(1,11,"/assets/photos/barber_shaves_a_man.jpg","css")),e.Q6J("uiAriaLabelledby",s),e.xp6(10),e.uIk("aria-label","ionicon:heart"===o.icon?"Cliquer pour mettre l'\xe9tablissement dans vos favoris":"Cliquer pour retirer l'\xe9tablissement de vos favoris"),e.xp6(6),e.Q6J("routerLink",i.backUrl),e.xp6(3),e.Q6J("ngIf",i.shopStep0),e.xp6(1),e.Q6J("ngIf",i.shopStep0),e.xp6(1),e.Q6J("ngIf",i.shopStep0),e.xp6(1),e.Q6J("ngIf",i.itemsTotal),e.xp6(1),e.Q6J("ngIf",i.shopStep0),e.xp6(1),e.Q6J("ngIf",i.shopStep1||i.shopStep2)}},dependencies:[b.O5,b.ax,L.rH,H.U,Y.N,_,N.l,F.N],encapsulation:2,data:{animation:[(0,q.U1)(),(0,q.g_)()]},changeDetection:0}),n})()}}]);